<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./style.css" />
    <title>Chart</title>
  </head>
  <body>
    <div class="container">
      <div class="data-graph">
        <h1 class="title1">Visualization</h1>
        <div class="content">
          <div class="buttons">
            <button class="btn" onclick="updateChartOne()">1</button>
            <button class="btn" onclick="updateChartTwo()">2</button>
            <button class="btn" onclick="updateChartThree()">3</button>
          </div>
          <div class="chart">
            <canvas id="myChart"></canvas>
          </div>
        </div>
      </div>

      <div class="data-table">
        <a href="#" onclick="showTable()"><h1 class="title2">Data</h1></a>
        <table class="table noborder hidden" id="table">
          <thead>
            <tr>
              <th scope="col"></th>
              <th scope="col">A</th>
              <th scope="col">B</th>
              <th scope="col">C</th>
              <th scope="col">D</th>
              <th scope="col">E</th>
              <th scope="col">F</th>
              <th scope="col">G</th>
              <th scope="col">H</th>
              <th scope="col">I</th>
              <th scope="col">J</th>
              <th scope="col">K</th>
              <th scope="col">L</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">Button 1</th>
              <td>70</td>
              <td>65</td>
              <td>60</td>
              <td>50</td>
              <td>35</td>
              <td>15</td>
              <td>60</td>
              <td>50</td>
              <td>40</td>
              <td>30</td>
              <td>20</td>
              <td>10</td>
            </tr>
            <tr>
              <th scope="row">Button 2</th>
              <td>60</td>
              <td>55</td>
              <td>50</td>
              <td>40</td>
              <td>25</td>
              <td>5</td>
              <td>50</td>
              <td>40</td>
              <td>30</td>
              <td>20</td>
              <td>10</td>
              <td>0</td>
            </tr>
            <tr>
              <th scope="row">Button 3</th>
              <td>60</td>
              <td>45</td>
              <td>10</td>
              <td>20</td>
              <td>40</td>
              <td>50</td>
              <td>10</td>
              <td>30</td>
              <td>45</td>
              <td>55</td>
              <td>15</td>
              <td>25</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      //data (point) labels
      const lineDataLabels = {
        id: "lineDataLabels",
        afterDatasetsDraw(chart, args, options) {
          const { ctx } = chart;
          ctx.save();
          ctx.font = "18px Arial bold";

          for (let x = 0; x < chart.data.datasets.length; x++) {
            for (let i = 0; i < chart.data.datasets[x].data.length; i++) {
              //text lenth/width
              const textWidth = ctx.measureText(
                chart.data.datasets[x].data[i].status
              ).width;
              ctx.fillText(
                chart.data.datasets[x].data[i].status,
                chart.getDatasetMeta(x).data[i].x - textWidth / 2,
                chart.getDatasetMeta(x).data[i].y - 14
              );
            }
          }
          ctx.restore();
        },
      };
      var ctx = document.getElementById("myChart").getContext("2d");

      var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: "line",

        // The data for our dataset
        data: {
          labels: ["Today", "2022", "2024", "2026", "2028", "2030"],
          datasets: [
            {
              label: "First dataset",
              backgroundColor: "transparent",
              borderColor: "#17357a",
              data: [
                { x: "Today", y: 70, status: "A" },
                { x: "2022", y: 65, status: "B" },
                { x: "2024", y: 60, status: "C" },
                { x: "2026", y: 50, status: "D" },
                { x: "2028", y: 35, status: "E" },
                { x: "2030", y: 15, status: "F" },
              ],
              pointRadius: 5,
              pointBackgroundColor: "white",
              pointBorderColor: "black",
              tension: 0.4,
            },
            {
              label: "Second dataset",
              backgroundColor: "#dcdee0",
              borderColor: "#dcdee0",
              fill: true,
              data: [
                { x: "Today", y: 60, status: "G" },
                { x: "2022", y: 50, status: "H" },
                { x: "2024", y: 40, status: "I" },
                { x: "2026", y: 30, status: "J" },
                { x: "2028", y: 20, status: "K" },
                { x: "2030", y: 10, status: "     L" },
              ],
              pointRadius: 5,
              pointBackgroundColor: "white",
              pointBorderColor: "black",
              tension: 0.4,
            },
          ],
        },

        // Configuration options go here
        options: {
          layout: {
            padding: {
              top: 50,
            },
          },
          scales: {
            x: {
              beginAtZero: true,
              grid: {
                drawOnChartArea: false,
              },
            },
            y: {
              beginAtZero: true,
              grid: {
                drawOnChartArea: false,
              },
            },
          },
        },
        plugins: [lineDataLabels],
      });

      function updateChartOne() {
        chart.data.datasets[0].data = [
          { x: "Today", y: 70, status: "A" },
          { x: "2022", y: 65, status: "B" },
          { x: "2024", y: 60, status: "C" },
          { x: "2026", y: 50, status: "D" },
          { x: "2028", y: 35, status: "E" },
          { x: "2030", y: 15, status: "F" },
        ];
        chart.data.datasets[1].data = [
          { x: "Today", y: 60, status: "G" },
          { x: "2022", y: 50, status: "H" },
          { x: "2024", y: 40, status: "I" },
          { x: "2026", y: 30, status: "J" },
          { x: "2028", y: 20, status: "K" },
          { x: "2030", y: 10, status: "     L" },
        ];
        chart.update();
      }
      function updateChartTwo() {
        chart.data.datasets[0].data = [
          { x: "Today", y: 60, status: "A" },
          { x: "2022", y: 55, status: "B" },
          { x: "2024", y: 50, status: "C" },
          { x: "2026", y: 40, status: "D" },
          { x: "2028", y: 25, status: "E" },
          { x: "2030", y: 5, status: "F" },
        ];
        chart.data.datasets[1].data = [
          { x: "Today", y: 50, status: "G" },
          { x: "2022", y: 40, status: "H" },
          { x: "2024", y: 30, status: "I" },
          { x: "2026", y: 20, status: "J" },
          { x: "2028", y: 10, status: "K" },
          { x: "2030", y: 0, status: "     L" },
        ];
        chart.update();
      }
      function updateChartThree() {
        chart.data.datasets[0].data = [
          { x: "Today", y: 60, status: "A" },
          { x: "2022", y: 45, status: "B" },
          { x: "2024", y: 10, status: "C" },
          { x: "2026", y: 20, status: "D" },
          { x: "2028", y: 40, status: "E" },
          { x: "2030", y: 50, status: "F" },
        ];
        chart.data.datasets[1].data = [
          { x: "Today", y: 10, status: "G" },
          { x: "2022", y: 30, status: "H" },
          { x: "2024", y: 45, status: "I" },
          { x: "2026", y: 55, status: "J" },
          { x: "2028", y: 15, status: "K" },
          { x: "2030", y: 25, status: "L" },
        ];
        chart.update();
      }

      function showTable() {
        var tablewrap = document.getElementById("table");
        tablewrap.classList.toggle("hidden");
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
